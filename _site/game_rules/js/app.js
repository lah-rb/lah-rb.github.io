function scrollContentTo(s){const e=document.getElementById(s);if(!e)return;const n=document.getElementById("content-scroll"),o=n.getBoundingClientRect(),i=e.getBoundingClientRect().top-o.top+n.scrollTop;n.scrollTo({top:i,behavior:"smooth"}),e.style.background="#fef3c7",e.style.transition="background 0.3s",setTimeout(()=>{e.style.background=""},2e3)}window.addEventListener("scroll",()=>{window.scrollY!==0&&window.scrollTo(0,0)},{passive:!1}),(async function(){KipukasSidebar.initToggle(),KipukasChat.init(),KipukasSearch.init();const e=await KipukasMarkdown.loadAndRenderMarkdown();e.length>0&&KipukasSidebar.buildTOC(e),KipukasSearch.indexContent();const n=document.getElementById("print-btn");let o=!1;fetch("kipukas_rules.pdf",{method:"HEAD"}).then(t=>{o=t.ok}).catch(()=>{o=!1}),n.addEventListener("click",()=>{if(o){const t=document.createElement("a");t.href="kipukas_rules.pdf",t.download="kipukas_rules.pdf",t.style.display="none",document.body.appendChild(t),t.click(),setTimeout(()=>document.body.removeChild(t),100)}else window.print()}),document.getElementById("content").addEventListener("click",t=>{const i=t.target.closest('a[href^="#"]');if(i){t.preventDefault();const a=i.getAttribute("href").slice(1);scrollContentTo(a),history.replaceState(null,"",`#${a}`)}}),window.addEventListener("hashchange",()=>{const t=window.location.hash.slice(1);t&&scrollContentTo(t)})})();
