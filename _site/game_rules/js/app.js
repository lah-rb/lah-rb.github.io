function scrollContentTo(o){const t=document.getElementById(o);if(!t)return;const n=document.getElementById("content-scroll"),e=n.getBoundingClientRect(),i=t.getBoundingClientRect().top-e.top+n.scrollTop;n.scrollTo({top:i,behavior:"smooth"}),t.style.background="#fef3c7",t.style.transition="background 0.3s",setTimeout(()=>{t.style.background=""},2e3)}window.addEventListener("scroll",()=>{window.scrollY!==0&&window.scrollTo(0,0)},{passive:!1}),(async function(){KipukasSidebar.initToggle(),KipukasChat.init(),KipukasSearch.init();const o=await KipukasMarkdown.loadAndRenderMarkdown();o.length>0&&KipukasSidebar.buildTOC(o),KipukasSearch.indexContent();const t=document.getElementById("print-btn");let n=!1;fetch("kipukas_rules.pdf",{method:"HEAD"}).then(e=>{n=e.ok}).catch(()=>{n=!1}),t.addEventListener("click",()=>{if(n){const e=document.createElement("a");e.href="kipukas_rules.pdf",e.download="kipukas_rules.pdf",e.style.display="none",document.body.appendChild(e),e.click(),setTimeout(()=>document.body.removeChild(e),100)}else window.print()}),document.getElementById("content").addEventListener("click",e=>{const i=e.target.closest('a[href^="#"]');if(i){e.preventDefault();const s=i.getAttribute("href").slice(1);scrollContentTo(s),history.replaceState(null,"",`#${s}`)}}),window.addEventListener("hashchange",()=>{const e=window.location.hash.slice(1);e&&scrollContentTo(e)})})();
