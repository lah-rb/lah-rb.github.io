const KipukasSidebar=(()=>{let i=[],o=[],a=null;function d(t){const e=document.getElementById("toc");e.innerHTML="",i=[],o=[],t.forEach(n=>{const s=document.createElement("a");s.href=`#${n.id}`,s.textContent=n.text,s.className=`toc-link${n.level===3?" toc-sub":""}`,s.dataset.targetId=n.id,s.addEventListener("click",f=>{f.preventDefault(),scrollContentTo(n.id),history.replaceState(null,"",`#${n.id}`),window.innerWidth<1024&&l()}),e.appendChild(s),i.push(s),o.push(n.element)}),r()}function r(){a&&a.disconnect();const t=document.getElementById("content-scroll");a=new IntersectionObserver(e=>{e.forEach(n=>{n.isIntersecting&&u(n.target.id)})},{root:t,rootMargin:"-10% 0px -80% 0px",threshold:0}),o.forEach(e=>a.observe(e))}function u(t){i.forEach(e=>{e.dataset.targetId===t?(e.classList.add("active"),e.scrollIntoView({block:"nearest",behavior:"smooth"})):e.classList.remove("active")})}function c(){const t=document.getElementById("sidebar"),e=document.getElementById("sidebar-overlay");t.classList.remove("-translate-x-full"),e.classList.remove("hidden")}function l(){const t=document.getElementById("sidebar"),e=document.getElementById("sidebar-overlay");t.classList.add("-translate-x-full"),e.classList.add("hidden")}function g(){const t=document.getElementById("sidebar");t.classList.contains("-translate-x-full")?c():window.innerWidth>=1024?(t.classList.add("-translate-x-full"),t.classList.remove("lg:translate-x-0"),t.classList.add("lg:-translate-x-full")):l()}function m(){const t=document.getElementById("sidebar-toggle"),e=document.getElementById("sidebar-close"),n=document.getElementById("sidebar-overlay");t.addEventListener("click",()=>{const s=document.getElementById("sidebar");window.innerWidth>=1024?s.classList.contains("lg:-translate-x-full")?(s.classList.remove("lg:-translate-x-full"),s.classList.add("lg:translate-x-0")):(s.classList.add("lg:-translate-x-full"),s.classList.remove("lg:translate-x-0")):s.classList.contains("-translate-x-full")?c():l()}),e.addEventListener("click",l),n.addEventListener("click",l)}return{buildTOC:d,initToggle:m}})();
