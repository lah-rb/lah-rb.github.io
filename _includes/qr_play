async function preProcessImage(mat) {
  const gray = new cv.Mat();
  cv.cvtColor(mat, gray, cv.COLOR_RGBA2GRAY);

  const blur = new cv.Mat();
  cv.medianBlur(gray, blur, 5);

  const contrast = new cv.Mat();
  cv.convertScaleAbs(blur, contrast, 1.5, 0);

  const threshold = new cv.Mat();
  cv.adaptiveThreshold(contrast, threshold, 255, cv.ADAPTIVE_THRESH_MEAN_C, cv.THRESH_BINARY, 11, 2);

  const kernel = cv.Mat.ones(5, 5, cv.CV_8U);
  const eroded = new cv.Mat();
  cv.erode(threshold, eroded, kernel, new cv.Point(-1, -1), 1, cv.BORDER_CONSTANT, cv.morphologyDefaultBorderValue());

  const dilated = new cv.Mat();
  cv.dilate(eroded, dilated, kernel, new cv.Point(-1, -1), 1, cv.BORDER_CONSTANT, cv.morphologyDefaultBorderValue());

  return dilated;
}

<div class="z-50 fixed w-full md:w-auto top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 mt-1">
