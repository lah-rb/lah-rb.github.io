<!-- Multiplayer Turn Timer Tool â€” appears when connected to a room (WASM: /api/room/turns) -->
<div x-data="{ showTurnMenu: false, roomConnected: false }"
     class="relative place-content-center"
     @room-connected.window="roomConnected = true"
     @room-disconnected.window="roomConnected = false"
     x-init="
       $watch('roomConnected', value => { if (!value) showTurnMenu = false });
     ">
    <button aria-label="Toggle Shared Turn Timer" x-show="roomConnected" x-cloak>
        <svg @click="showTurnMenu = !showTurnMenu"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            {% unless page.landscape %}
              :class="'lg:stroke-kip-goldenrod'"
            {% endunless %}
            class="{{ include.base_stroke }}{{ include.svgClass }}">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
        </svg>
    </button>

    <!-- Full-screen modal overlay -->
    <div x-show="showTurnMenu" x-cloak
        class="fixed inset-0 flex items-center justify-center z-50"
        x-transition.duration.350ms
        x-effect="if (showTurnMenu) $nextTick(() => {
            if (typeof htmx !== 'undefined') {
                var tc = document.getElementById('turn-container');
                if (tc) htmx.ajax('GET', tc.getAttribute('hx-get') || '/api/room/turns', {target:'#turn-container', swap:'innerHTML'});
            }
        })">

        <!-- Backdrop -->
        <div class="absolute inset-0 bg-slate-300 opacity-75" @click="showTurnMenu = false"></div>

        <!-- Modal content -->
        <div class="bg-amber-50 z-50 rounded-lg shadow-xl w-full max-w-sm max-h-[85vh] overflow-y-auto relative">
            <div class="p-3 border-b border-slate-300">
                <p class="text-lg font-bold text-kip-drk-sienna">Shared Turn Timer</p>
                <p class="text-xs text-slate-500">Synced with multiplayer room</p>
            </div>

            <!-- Turn timer section -->
            <div id="turn-container"
              hx-get="/api/room/turns"
              hx-trigger="load"
              hx-swap="innerHTML">
            </div>

            <!-- Close button -->
            <div class="border-t border-slate-300 p-3">
                <button @click="showTurnMenu = false"
                  class="w-full bg-slate-400 hover:bg-slate-500 text-amber-50 font-bold py-2 px-4 rounded text-sm">
                  Close
                </button>
            </div>
        </div>
    </div>
</div>
